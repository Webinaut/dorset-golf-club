---
import { Image } from "astro:assets";
import gallery1 from "../images/gallery/IMG_0543.jpg";
import gallery2 from "../images/gallery/image02.jpg";
import gallery3 from "../images/gallery/image03.jpg";
import gallery4 from "../images/gallery/IMG_0630.jpg";
import gallery5 from "../images/gallery/IMG_0576.jpg";
import gallery6 from "../images/gallery/IMG_0583.jpg";

// Define the gallery images with their metadata
const galleryImages = [
  {
    src: gallery1,
    alt: "Fairway bunker Hole 9 (par 4)",
    caption: "Fairway bunker Hole 9 (par 4)",
    width: 800,
    height: 600,
  },
  {
    src: gallery2,
    alt: "Golf trip 2024 at Hidden Valley Golf Club",
    caption: "Golf trip 2024 at Hidden Valley Golf Club",
    width: 800,
    height: 600,
  },
  {
    src: gallery3,
    alt: "Welcome back lunch February 2025",
    caption: "Welcome back lunch February 2025",
    width: 800,
    height: 600,
  },
  {
    src: gallery4,
    alt: "Game day",
    caption: "Game day",
    width: 800,
    height: 600,
  },
  {
    src: gallery5,
    alt: "Hole 2 (par 4)",
    caption: "Hole 2 (par 4)",
    width: 800,
    height: 600,
  },
  {
    src: gallery6,
    alt: "Putting on Hole 6 (par 3)",
    caption: "Putting on Hole 6 (par 3)",
    width: 800,
    height: 600,
  },
];
---

<div class="gallery-container">
  <div class="gallery">
    {
      galleryImages.map((image) => (
        <figure class="gallery-item">
          <Image
            src={image.src}
            alt={image.alt}
            width={image.width}
            height={image.height}
            class="gallery-image"
          />
          <figcaption>{image.caption}</figcaption>
        </figure>
      ))
    }
  </div>
</div>

<!-- Modal -->
<dialog id="modal3" onclick="event.target === this && this.close()">
  <article>
    <section class="splide" role="group" aria-label="Splide Basic HTML Example">
      <div class="splide__arrows"></div>
      <div class="splide__track">
        <ul class="splide__list">
          {
            galleryImages.map((image) => (
              <li class="splide__slide">
                <div class="splide__slide__container">
                  <Image src={image.src} alt="" loading="lazy" />
                </div>
              </li>
            ))
          }
        </ul>
      </div>
    </section>
  </article>
</dialog>

<style lang="scss">
  .gallery-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
  }

  h1 {
    text-align: center;
    margin-bottom: 2rem;
    color: #333;
  }

  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }

  .gallery-item {
    margin: 0;
    position: relative;
    overflow: hidden;
    border-radius: var(--pico-border-radius);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    padding: 0.25em;
    transition: transform 0.3s ease;
  }

  .gallery-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
    cursor: pointer;
  }

  .gallery-image {
    width: 100%;
    height: auto;
    object-fit: contain;
    /* object-fit: cover; */
    aspect-ratio: 4/3;
  }

  figcaption {
    padding: 1rem;
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    text-align: center;
    font-size: 0.9rem;
  }

  @media (max-width: 768px) {
    .gallery {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
    }

    .gallery-container {
      padding: 1rem;
    }
  }
  .splide__slide img {
    width: 100%;
    height: 500px;
    object-fit: contain;
  }

  .splide__arrows {
    --pico-primary-focus: transparent;
  }

  /* Modal */
  /* prevent scroll when dialog is open */
  body:has(dialog[open]) {
    overflow: hidden;
  }

  dialog:not([open]) {
    display: grid;
    opacity: 0;
    pointer-events: none;
    visibility: hidden;
    transition: all var(--pico-transition) allow-discrete;
  }

  dialog[open] {
    display: grid;
    visibility: visible;
    opacity: 1;
    transition: opacity var(--pico-transition);
  }

  dialog article {
    margin: 0;
    padding: 1em 0;
    max-width: 90vw;
    max-height: unset;
    overflow: unset;
    transform: scale(0.5);
    transition: transform var(--pico-transition);
  }
  dialog article section {
    margin-bottom: 0;
    /* max-width: 90vw; */
    /*height: 90vh;*/
  }
  dialog[open] article {
    transform: scale(1);
  }
</style>

<script>
  const images = document.querySelectorAll("img.gallery-image");
  const dialog = document.getElementById("modal3");
  images.forEach(function (imag) {
    imag.addEventListener("click", () => {
      (dialog as HTMLDialogElement).showModal();
    });
  });
</script>
<script>
  // Splide Section
  import "@splidejs/splide/css";
  import Splide from "@splidejs/splide";

  new Splide(".splide", {
    type: "slide",
    perPage: 1,
    // focus: 0,
    // slideFocus: false,
    live: false,
    // arrows: true,
    speed: 800,
    // autoplay: false,
    // width: "100%",
    // height: "500px",
    // cover: true,
    pagination: true,
    padding: 0,
  }).mount();
</script>
